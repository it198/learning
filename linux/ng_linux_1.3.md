## 第三章、主机规划与磁盘分区

### 1、Linux与硬件的搭配

#### 1.1 认识计算机的硬件配备

#### 1.2 择与Linux搭配的主机配备： 硬件支持相关网站

#### 1.3 各硬件装置在Linux中的档名

* **学习Linux最重要的观念转变：** 

	在Linux系统中，每个装置都被当成一个文件来对待。
	
* 另外先提出来强调一下，在Linux这个系统当中，几乎所有的硬件装置文件都在/dev这个目录内， 所以你会看到/dev/hda, /dev/fd0等等的档名喔。

### 2、磁盘分区

#### 2.1 磁碟连接的方式与装置档名的关系

#### 2.2 磁碟的组成复习

* 磁碟盘上面又可细分出磁区(Sector)与磁柱(Cylinder)两种单位， 其中磁区每个为512bytes那么大。


* 磁碟的第一个磁区主要记录了两个重要的资讯，分别是：

	主要启动记录区(Master Boot Record, MBR)：可以安装启动管理程序的地方，有446 bytes 
	
	分割表(partition table)：记录整颗硬盘分割的状态，有64 bytes

#### 2.3 磁盘分区表(partition table)

* **分区的几点重要信息**

	其实所谓的『分割』只是针对那个64 bytes的分割表进行配置而已！
	
	硬盘默认的分割表仅能写入四组分割资讯
	
	这四组分割资讯我们称为主要(Primary)或延伸(Extended)分割槽
	
	分割槽的最小单位为磁柱(cylinder)
	
	当系统要写入磁碟时，一定会参考磁盘分区表，才能针对某个分割槽进行数据的处理
	
	扩展分配最多只能有一个(操作系统的限制)
	
	逻辑分割是由扩展分配持续切割出来的分割槽；
	
	能够被格式化后，作为数据存取的分割槽为主要分割与逻辑分割。扩展分配无法格式化；
	
	逻辑分割的数量依操作系统而不同，在Linux系统中，IDE硬盘最多有59个逻辑分割(5号到63号)， SATA硬盘则有11个逻辑分割(5号到15号)。
	
* 扩展分配的目的是使用额外的磁区来记录分割资讯，扩展分配本身并不能被拿来格式化。

* 逻辑分割槽的装置名称号码就由5号开始了！这是个很重要的特性，不能忘记喔！

* 如果扩展分配被破坏，所有逻辑分割将会被删除。 因为逻辑分割的资讯都记录在扩展分配里面嘛！

#### 2.4 启动流程与主要启动记录区(MBR)

* 简单的说，整个启动流程到操作系统之前的动作应该是这样的：

	1、**BIOS**：启动主动运行的韧体，会认识第一个可启动的装置；
	
	2、**MBR**：第一个可启动装置的第一个磁区内的主要启动记录区块，内含启动管理程序；
	
	3、**启动管理程序(boot loader)**：一支可读取核心文件来运行的软件；
	
	4、**核心文件**：开始操作系统的功能...
	
	启动的流程由：BIOS-->MBR-->-->boot loader-->核心文件；
	
* BIOS与MBR都是硬件本身会支持的功能，至於Boot loader则是操作系统安装在MBR上面的一套软件了。由於MBR仅有446 bytes而已，因此这个启动管理程序是非常小而美的。 这个boot loader的主要任务有底下这些项目：

	。**提供菜单**：使用者可以选择不同的启动项目，这也是多重启动的重要功能！
	
	。**加载核心文件**：直接指向可启动的程序区段来开始操作系统；
	
	。**转交其他loader**：将启动管理功能转交给其他loader负责。

#### 2.5 Linux安装模式下，磁盘分区的选择(极重要)

* 目录树结构(directory tree)

	整个目录树架构最重要的就是那个根目录(root directory)，这个根目录的表示方法为一条斜线『/』， 所有的文件都与目录树有关。
	
* 文件系统与目录树的关系(挂载)

	**所谓的『挂载』就是利用一个目录当成进入点，将磁盘分区槽的数据放置在该目录下； 也就是说，进入该目录就可以读取该分割槽的意思。**这个动作我们称为『挂载』，那个进入点的目录我们称为『挂载点』。 由於整个Linux系统最重要的是根目录，因此根目录一定需要挂载到某个分割槽的。 至於其他的目录则可依使用者自己的需求来给予挂载到不同的分割槽。
	
* distributions安装时，挂载点与磁盘分区的规划

### 3、安装Linux前的规划

#### 3.1 选择适当的distribution

* [内核官网](https://www.kernel.org/)

* [CentOS官网](https://www.centos.org/)

#### 3.2 主机的服务规划与硬件的关系

* 根据用途分配硬件

#### 3.3 主机硬盘的主要规划(partition)

* 一般分区的目录(简单的话分配根目录/和交换目录swap)

	。/
	
	。/Swap
	
	。/usr
	
	。/home
	
	。/var
	
	






